"use strict";(self.webpackChunkprenzavier01_github_io=self.webpackChunkprenzavier01_github_io||[]).push([[496],{4116:($,c,s)=>{s.r(c),s.d(c,{Module:()=>D});var p=s(1368),g=s(3660),m=s(940),v=s(1780),t=s(4496),y=s(1296);let C=(()=>{class o{constructor(){}ngOnInit(){}static \u0275fac=function(a){return new(a||o)};static \u0275cmp=t.In1({type:o,selectors:[["app-layout"]],decls:3,vars:0,consts:[[1,"content"]],template:function(a,n){1&a&&(t.wR5(0,"app-breadcrumb"),t.I0R(1,"section",0),t.wR5(2,"router-outlet"),t.C$Y())},dependencies:[m.cP,y.a]})}return o})();var u=s(2328),S=s(5016),E=s(460),R=s(3064),x=s(5584),d=s(2532),f=s(7540),h=s(4716),b=s(5376),A=s(6228),P=s(9316);function O(o,i){if(1&o&&t.OEk(0),2&o){const e=i.row,a=t.GaO();t.oRS(" \u20b1 ",a.formatCurrency(e.loanAmount)," ")}}function N(o,i){if(1&o&&t.OEk(0),2&o){const e=i.row,a=t.GaO();t.oRS(" \u20b1 ",a.formatCurrency(e.dueAmount)," ")}}function I(o,i){if(1&o&&t.OEk(0),2&o){const e=i.row,a=t.GaO();t.oRS(" \u20b1 ",a.formatCurrency(e.penaltyAmount)," ")}}function T(o,i){if(1&o&&t.OEk(0),2&o){const e=i.row,a=t.GaO();t.oRS(" \u20b1 ",a.formatCurrency(e.paymentAmount)," ")}}function L(o,i){if(1&o&&t.OEk(0),2&o){const e=i.row;t.oRS(" ",e.status?"PaidRestructure"==e.status?"Paid to Restructure":e.status:"Unpaid"," ")}}function _(o,i){if(1&o&&t.OEk(0),2&o){const e=i.row,a=t.GaO();t.oRS(" \u20b1 ",a.formatCurrency(e.amount)," ")}}function z(o,i){1&o&&(t.I0R(0,"div",6)(1,"div",35),t.wR5(2,"img",36),t.C$Y()())}const Y=[{path:"",component:C,children:[{path:"",pathMatch:"full",component:(()=>{class o{orderService;paymentService;expenseService;exportService;datePipe;titleCasePipe;constructor(e,a,n,r,l,j){this.orderService=e,this.paymentService=a,this.expenseService=n,this.exportService=r,this.datePipe=l,this.titleCasePipe=j}reportSelection="";dateRangeValue="";filter={};sort="asc";loanreports;paymentreports;expensesreports;totalAmount={loan:0,payments:0,expenses:0};tableConfig={singleActions:[],bulkActions:[],columnCSV:[],showSelect:!1,showSort:!0,showExport:!0};ngOnInit(){this.getData()}searchData(){this.filter={startdateCreated:this.datePipe.transform(this.dateRangeValue[0],"yyyy-MM-dd"),enddateCreated:this.datePipe.transform(this.dateRangeValue[1],"yyyy-MM-dd")},this.getData()}getData(){this.getLoan("asc"),this.getPayments("asc"),this.getExpenses("asc")}getLoan(e){this.orderService.getList(this.filter,e).subscribe({next:a=>{this.loanreports=a.data;let n=0;a.data.forEach(r=>{n+=r.loanAmount,r.collateral="RealEstate"==r.collateral?"Real Estate Mortgage":"Chattel Mortgage"}),this.totalAmount.loan=n}})}getPayments(e){this.paymentService.getList(this.filter,e).subscribe({next:a=>{this.paymentreports=a.data;let n=0;a.data.forEach(r=>{n+=r.paymentAmount,r.status="PaidRestructure"==r.status?"Paid to Restructure":r.status}),this.totalAmount.payments=n}})}getExpenses(e){this.expenseService.getList(this.filter,e).subscribe({next:a=>{this.expensesreports=a.data;let n=0;a.data.forEach(r=>{n+=r.amount}),this.totalAmount.expenses=n}})}onLoanSort(e){this.getLoan(e)}onLoanExport(e){let a="All";Object.keys(this.filter).length>0&&(a=this.filter.startdateCreated+" to "+this.filter.enddateCreated);let n=[{title:"Loan Order List ("+a+")",headers:e.headers,data:e.values,sheetName:"LOAN ORDERS"}];"xlsx"==e.type?this.exportService.generateExcel(n,"LOAN"):"csv"==e.type?this.exportService.generateCSV(n,"LOAN"):this.exportService.generatePDF(n,"LOAN")}onPaymentSort(e){this.getPayments(e)}onPaymentExport(e){let a="All";Object.keys(this.filter).length>0&&(a=this.filter.startdateCreated+" to "+this.filter.enddateCreated);let n=[{title:"Payment List ("+a+")",headers:e.headers,data:e.values,sheetName:"PAYMENTS"}];"xlsx"==e.type?this.exportService.generateExcel(n,"PAYMENTS"):"csv"==e.type?this.exportService.generateCSV(n,"PAYMENTS"):this.exportService.generatePDF(n,"PAYMENTS")}onExpensesSort(e){this.getExpenses(e)}onExpensesExport(e){let a="All";Object.keys(this.filter).length>0&&(a=this.filter.startdateCreated+" to "+this.filter.enddateCreated);let n=[{title:"Expenses List ("+a+")",headers:e.headers,data:e.values,sheetName:"EXPENSES"}];"xlsx"==e.type?this.exportService.generateExcel(n,"EXPENSES"):"csv"==e.type?this.exportService.generateCSV(n,"EXPENSES"):this.exportService.generatePDF(n,"EXPENSES")}formatCurrency(e){if(e&&Number(e)>=0){const a=String(e).split("."),n=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");let r=".00";return a[1]&&(r="."+a[1].substring(0,2)),n+r}return 0}static \u0275fac=function(a){return new(a||o)(t.GI1(u.If),t.GI1(S.E),t.GI1(u.zi),t.GI1(u.YN),t.GI1(p.y),t.GI1(p.oL))};static \u0275cmp=t.In1({type:o,selectors:[["app-reports"]],features:[t.M5G([p.oL])],decls:57,vars:8,consts:[[1,"px-2.5"],["nz-row",""],["nz-col","","nzSpan","24",1,"flex","justify-end"],[1,"mr-1"],[1,"w-full",3,"ngModel","ngModelChange"],["nz-button","","nzType","primary",3,"click"],["nz-row","",1,"mt-5"],["nz-col","","nzSpan","24"],[3,"dataSource","config","emitSort","emitExport"],["reportsTable",""],["name","referenceNumber","value","Ref. No."],["name","borrower","value","Borrower"],["name","contactNumber","value","Contact No."],["name","loanAmount","value","Loan Amount"],["name","term","value","Term (days)"],["name","dueDate","value","Due Date"],["name","collateral","value","Collateral"],["name","status","value","Status"],["name","loanAmount"],["name","loanRef","value","Ref. No."],["name","dueAmount","value","Amount Due"],["name","penaltyAmount","value","Penalty Amount"],["name","paymentAmount","value","Amount Paid"],["name","dateCreated","value","Date Paid"],["name","dueAmount"],["name","penaltyAmount"],["name","paymentAmount"],["name","status"],["name","description","value","Name"],["name","amount","value","Amount"],["name","administrator","value","Administrator"],["name","dateCreated","value","Date Created"],["name","dateUpdated","value","Date Updated"],["name","amount"],["nz-row","","class","mt-5",4,"ngIf"],["nz-col","","nzSpan","24",1,"flex","justify-center"],["src","/assets/images/coming-soon.jpg",1,"w-1/5"]],template:function(a,n){1&a&&(t.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5"),t.OEk(5,"Date Filter:"),t.C$Y(),t.I0R(6,"nz-range-picker",4),t.iHE("ngModelChange",function(l){return t.kNx(n.dateRangeValue,l)||(n.dateRangeValue=l),l}),t.C$Y()(),t.I0R(7,"div")(8,"h5"),t.OEk(9,"\xa0"),t.C$Y(),t.I0R(10,"button",5),t.qCj("click",function(){return n.searchData()}),t.OEk(11,"Search"),t.C$Y()()()(),t.I0R(12,"div",6)(13,"div",7)(14,"h5"),t.OEk(15,"Loan Reports"),t.C$Y(),t.I0R(16,"app-table",8,9),t.qCj("emitSort",function(l){return n.onLoanSort(l)})("emitExport",function(l){return n.onLoanExport(l)}),t.wR5(18,"app-table-columns",10)(19,"app-table-columns",11)(20,"app-table-columns",12)(21,"app-table-columns",13)(22,"app-table-columns",14)(23,"app-table-columns",15)(24,"app-table-columns",16)(25,"app-table-columns",17),t.yuY(26,O,1,1,"ng-template",18),t.C$Y()()(),t.I0R(27,"div",6)(28,"div",7)(29,"h5"),t.OEk(30,"Payment Reports"),t.C$Y(),t.I0R(31,"app-table",8,9),t.qCj("emitSort",function(l){return n.onPaymentSort(l)})("emitExport",function(l){return n.onPaymentExport(l)}),t.wR5(33,"app-table-columns",19)(34,"app-table-columns",11)(35,"app-table-columns",20)(36,"app-table-columns",21)(37,"app-table-columns",22)(38,"app-table-columns",23)(39,"app-table-columns",17),t.yuY(40,N,1,1,"ng-template",24)(41,I,1,1,"ng-template",25)(42,T,1,1,"ng-template",26)(43,L,1,1,"ng-template",27),t.C$Y()()(),t.I0R(44,"div",6)(45,"div",7)(46,"h5"),t.OEk(47,"Expenses Reports"),t.C$Y(),t.I0R(48,"app-table",8,9),t.qCj("emitSort",function(l){return n.onExpensesSort(l)})("emitExport",function(l){return n.onExpensesExport(l)}),t.wR5(50,"app-table-columns",28)(51,"app-table-columns",29)(52,"app-table-columns",30)(53,"app-table-columns",31)(54,"app-table-columns",32),t.yuY(55,_,1,1,"ng-template",33),t.C$Y()()(),t.yuY(56,z,3,0,"div",34),t.C$Y()),2&a&&(t.yG2(6),t.OKB("ngModel",n.dateRangeValue),t.yG2(10),t.E7m("dataSource",n.loanreports)("config",n.tableConfig),t.yG2(15),t.E7m("dataSource",n.paymentreports)("config",n.tableConfig),t.yG2(17),t.E7m("dataSource",n.expensesreports)("config",n.tableConfig),t.yG2(8),t.E7m("ngIf","amount"==n.reportSelection))},dependencies:[p.u_,E.Ez,R.k,x.o9,d.QD,d.ox,f.iO,f.u2,h.ue,h._G,b.o,A.E,P._]})}return o})(),data:{breadcrumb:v.m.REPORTS}}]}];let M=(()=>{class o{static \u0275fac=function(a){return new(a||o)};static \u0275mod=t.a4G({type:o});static \u0275inj=t.s3X({imports:[m.qQ.forChild(Y),m.qQ]})}return o})();var G=s(4744);let D=(()=>{class o{static \u0275fac=function(a){return new(a||o)};static \u0275mod=t.a4G({type:o});static \u0275inj=t.s3X({imports:[p.MD,M,g.k,G.cP.forChild()]})}return o})()}}]);