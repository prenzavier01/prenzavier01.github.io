"use strict";(self.webpackChunkprenzavier01_github_io=self.webpackChunkprenzavier01_github_io||[]).push([[528],{1148:(F,p,i)=>{i.r(p),i.d(p,{Module:()=>z});var d=i(1368),u=i(3660),l=i(940),h=i(1780),s=i(4496),g=i(1296);let x=(()=>{class n{constructor(){}ngOnInit(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=s.In1({type:n,selectors:[["app-layout"]],decls:3,vars:0,consts:[[1,"content"]],template:function(t,a){1&t&&(s.wR5(0,"app-breadcrumb"),s.I0R(1,"section",0),s.wR5(2,"router-outlet"),s.C$Y())},dependencies:[l.cP,g.a]})}return n})();var c=i(2328),f=i(7176),v=i(460),E=i(3064),S=i(5584),m=i(2532),b=i(5376),C=i(6228),y=i(9316);function A(n,G){if(1&n&&s.OEk(0),2&n){const e=G.row,t=s.GaO();s.oRS(" \u20b1 ",t.formatCurrency(e.amount)," ")}}const D=[{path:"",component:x,children:[{path:"",pathMatch:"full",component:(()=>{class n{datePipe;service;appService;exportService;dialogService;toastService;constructor(e,t,a,o,r,T){this.datePipe=e,this.service=t,this.appService=a,this.exportService=o,this.dialogService=r,this.toastService=T}expenses;viewPreference="";tableConfig={singleActions:["edit","change status","delete"],bulkActions:["change status","delete"],columnCSV:[],showSelect:!0,showSort:!0,showExport:!0};filter;sort="asc";status=["Active","Suspended"];ngOnInit(){this.viewPreference=this.appService.getAccount().viewPreference,this.getExpenses(),this.getPermissions()}permissions;getPermissions(){this.permissions=this.appService.getPermissions()}getExpenses(){this.service.getList(this.filter,this.sort).subscribe({next:e=>{this.expenses=e.data.map(t=>(t.editDisabled=t.changeDisabled=!this.permissions.expenses[2].checked,t.deleteDisabled=!this.permissions.expenses[3].checked,t.checkDisabled=t.editDisabled&&t.changeDisabled&&t.deleteDisabled,t))}})}createExpense(){this.dialogService.manageExpenses().afterClose.subscribe({next:e=>{e.data&&this.getExpenses()}})}editExpense(e){this.dialogService.manageExpenses(e).afterClose.subscribe({next:t=>{t.data&&this.getExpenses()}})}changeStatus(e){this.dialogService.changeStatus("Change Status: Expenses",this.status).afterClose.subscribe({next:t=>{if(t.data){let a=e.map(o=>o.id).join(",");this.service.changestatus(a,t.data).subscribe({next:o=>{this.toastService.show("success","Expenses",o.message),this.getExpenses()}})}}})}deleteExpense(e){this.dialogService.confirm("Delete Expense","Are you sure you want to delete?").afterClose.subscribe({next:t=>{if(t.data){let a=e.map(o=>o.id).join(",");this.service.delete(a).subscribe({next:o=>{this.toastService.show("success","Expenses",o.message),this.getExpenses()}})}}})}onFilterHeaderChange(e){this.filter=e,this.getExpenses()}onSort(e){this.sort=e,this.getExpenses()}onExport(e){let t=[{title:"Expenses List as of "+this.datePipe.transform(new Date,"MMM dd, yyyy"),headers:e.headers,data:e.values,sheetName:"Expenses"}];"xlsx"==e.type?this.exportService.generateExcel(t,"Expenses"):"csv"==e.type?this.exportService.generateCSV(t,"Expenses"):this.exportService.generatePDF(t,"Expenses")}doBulkAction(e){"change status"==e.action?this.changeStatus(e.data):this.deleteExpense(e.data)}doSingleAction(e){"edit"==e.action?this.editExpense(e.data):"change status"==e.action?this.changeStatus([e.data]):this.deleteExpense([e.data])}formatCurrency(e){if(e&&Number(e)>=0){const t=String(e).split("."),a=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");let o=".00";return t[1]&&(o="."+t[1].substring(0,2)),a+o}return 0}static \u0275fac=function(t){return new(t||n)(s.GI1(d.y),s.GI1(c.zi),s.GI1(c.ye),s.GI1(c.YN),s.GI1(f.E),s.GI1(c.s9))};static \u0275cmp=s.In1({type:n,selectors:[["app-expenses"]],decls:13,vars:3,consts:[[1,"mt-[-25px]","px-2.5"],["nz-row",""],["nz-col","","nzSpan","24",1,"flex","justify-end"],["id","createButton","nz-button","",1,"bg-primary","rounded-xl","text-white","btn-create","disabled:bg-gray-500",3,"disabled","click"],[3,"dataSource","config","emitFilter","emitSort","emitExport","emitSingleAction","emitBulkAction"],["expensesTable",""],["name","description","value","Name","filter","text"],["name","amount","value","Amount","filter","text"],["name","administrator","value","Administrator","filter","text"],["name","dateCreated","value","Date Created","filter","daterangepicker"],["name","dateUpdated","value","Date Updated","filter","daterangepicker"],["name","amount"]],template:function(t,a){1&t&&(s.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),s.qCj("click",function(){return a.createExpense()}),s.OEk(4," CREATE "),s.C$Y()()(),s.I0R(5,"app-table",4,5),s.qCj("emitFilter",function(r){return a.onFilterHeaderChange(r)})("emitSort",function(r){return a.onSort(r)})("emitExport",function(r){return a.onExport(r)})("emitSingleAction",function(r){return a.doSingleAction(r)})("emitBulkAction",function(r){return a.doBulkAction(r)}),s.wR5(7,"app-table-columns",6)(8,"app-table-columns",7)(9,"app-table-columns",8)(10,"app-table-columns",9)(11,"app-table-columns",10),s.yuY(12,A,1,1,"ng-template",11),s.C$Y()()),2&t&&(s.yG2(3),s.E7m("disabled",!a.permissions.expenses[1].checked),s.yG2(2),s.E7m("dataSource",a.expenses)("config",a.tableConfig))},dependencies:[v.Ez,E.k,S.o9,m.QD,m.ox,b.o,C.E,y._]})}return n})(),data:{breadcrumb:h.m.EXPENSES}}]}];let I=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=s.a4G({type:n});static \u0275inj=s.s3X({imports:[l.qQ.forChild(D),l.qQ]})}return n})();var P=i(4744);let z=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=s.a4G({type:n});static \u0275inj=s.s3X({imports:[d.MD,I,u.k,P.cP.forChild()]})}return n})()}}]);